import os
import time
import adbutils
from ppadb.client import Client as AdbClient

# os.system('cmd /c "HD-adb kill-server"')
# os.system('cmd /c "HD-adb start-server"')
# time.sleep(5)
# os.system('cmd /c "HD-adb devices"')

# adb = adbutils.AdbClient(host="127.0.0.1", port=5037)
# print(adb.devices())
# output = adb.connect("127.0.0.1:5555")
# print(output)
# d = adb.device(serial="emulator-5554")
# print('test')


# client = AdbClient(host="127.0.0.1", port=5037)
# device = client.device("emulator-5554")
# result = device.screencap()
# with open("screen.png", "wb") as fp:
#     fp.write(result)
#
# print('Done!')

# can look like this, 71014
test = {'command': 'BattleDimensionHoleDungeonResult', 'ret_code': 0, 'wizard_info': {'wizard_id': 15286762, 'wizard_name': 'Teambunbun', 'wizard_mana': 38147500, 'wizard_crystal': 2011, 'wizard_crystal_paid': 1947, 'wizard_last_login': '2020-07-24 00:51:40', 'wizard_last_country': 'US', 'wizard_last_lang': 'en', 'wizard_level': 50, 'experience': 3800000, 'wizard_energy': 26, 'energy_max': 100, 'energy_per_min': 0.26, 'next_energy_gain': 154, 'arena_energy': 5, 'arena_energy_max': 10, 'arena_energy_next_gain': 1120, 'unit_slots': {'number': 120}, 'rep_unit_id': 10301252264, 'rep_assigned': 1, 'pvp_event': 0, 'mail_box_event': 0, 'social_point_current': 1200, 'social_point_max': 3000, 'honor_point': 869, 'guild_point': 1070, 'darkportal_energy': 6, 'darkportal_energy_max': 10, 'costume_point': 206, 'costume_point_max': 9999, 'honor_medal': 64, 'honor_mark': 162, 'event_coin': 5, 'lobby_master_id': 1002, 'emblem_master_id': 0, 'period_energy_max': 10, 'gain_exp': 1300}, 'dungeon_id': 1101, 'difficulty': 5, 'win_lose': 1, 'clear_time': {'is_new_record': 0, 'current_time': 183008, 'best_time': 97387}, 'first_clear': 0, 'unit_list': [{'unit_id': 5142399092, 'wizard_id': 15286762, 'island_id': 4, 'pos_x': 4, 'pos_y': 15, 'building_id': 177212429, 'unit_master_id': 18713, 'unit_level': 40, 'class': 6, 'con': 681, 'atk': 637, 'def': 494, 'spd': 105, 'resist': 15, 'accuracy': 0, 'critical_rate': 15, 'critical_damage': 50, 'experience': 1005420, 'exp_gained': 0, 'exp_gain_rate': 0, 'skills': [[9503, 7], [9508, 5], [9513, 2]], 'runes': {'5': {'rune_id': 29575462978, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 5142399092, 'slot_no': 1, 'rank': 4, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 9, 'base_value': 602300, 'sell_value': 30115, 'pri_eff': [3, 94], 'prefix_eff': [4, 6], 'sec_eff': [[10, 5, 0, 0], [12, 10, 0, 0], [8, 16, 0, 0]], 'extra': 4}, '6': {'rune_id': 13495883232, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 5142399092, 'slot_no': 2, 'rank': 5, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 760800, 'sell_value': 38040, 'pri_eff': [2, 63], 'prefix_eff': [4, 6], 'sec_eff': [[5, 18, 0, 0], [9, 4, 0, 0], [6, 25, 0, 7], [8, 10, 0, 2]], 'extra': 5}, '7': {'rune_id': 13870813439, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 5142399092, 'slot_no': 3, 'rank': 5, 'class': 6, 'set_id': 17, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 475500, 'sell_value': 25461, 'pri_eff': [5, 118], 'prefix_eff': [0, 0], 'sec_eff': [[2, 14, 0, 4], [11, 12, 0, 0], [9, 4, 0, 0], [10, 17, 0, 0]], 'extra': 0}, '8': {'rune_id': 22852717270, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 5142399092, 'slot_no': 4, 'rank': 5, 'class': 6, 'set_id': 17, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 570600, 'sell_value': 30554, 'pri_eff': [2, 47], 'prefix_eff': [0, 0], 'sec_eff': [[8, 10, 0, 0], [11, 6, 0, 0], [6, 18, 0, 0], [4, 8, 0, 0]], 'extra': 4}, '9': {'rune_id': 31813964088, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 5142399092, 'slot_no': 5, 'rank': 5, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 557920, 'sell_value': 27896, 'pri_eff': [1, 1800], 'prefix_eff': [0, 0], 'sec_eff': [[3, 15, 0, 0], [6, 15, 0, 0], [2, 25, 0, 0], [10, 6, 0, 0]], 'extra': 5}, '10': {'rune_id': 22462963360, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 5142399092, 'slot_no': 6, 'rank': 5, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 646680, 'sell_value': 32334, 'pri_eff': [2, 63], 'prefix_eff': [8, 6], 'sec_eff': [[9, 5, 0, 0], [6, 19, 0, 0], [5, 16, 0, 0], [12, 8, 0, 0]], 'extra': 3}}, 'costume_master_id': 0, 'trans_items': [], 'attribute': 3, 'create_time': '2015-11-22 19:21:19', 'source': 5, 'homunculus': 0, 'homunculus_name': '', 'awakening_info': []}, {'unit_id': 9055514989, 'wizard_id': 15286762, 'island_id': 4, 'pos_x': 15, 'pos_y': 13, 'building_id': 177212429, 'unit_master_id': 18813, 'unit_level': 40, 'class': 6, 'con': 681, 'atk': 747, 'def': 549, 'spd': 103, 'resist': 40, 'accuracy': 0, 'critical_rate': 15, 'critical_damage': 50, 'experience': 1005420, 'exp_gained': 0, 'exp_gain_rate': 0, 'skills': [[9603, 3], [9608, 5], [9613, 4]], 'runes': {'9': {'rune_id': 23050840489, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 9055514989, 'slot_no': 4, 'rank': 5, 'class': 6, 'set_id': 2, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 456480, 'sell_value': 31053, 'pri_eff': [10, 80], 'prefix_eff': [1, 204], 'sec_eff': [[5, 18, 0, 0], [9, 22, 0, 0], [12, 5, 0, 0], [8, 9, 0, 2]], 'extra': 5}, '11': {'rune_id': 31800071623, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 9055514989, 'slot_no': 6, 'rank': 5, 'class': 6, 'set_id': 11, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 538900, 'sell_value': 28856, 'pri_eff': [4, 63], 'prefix_eff': [0, 0], 'sec_eff': [[6, 5, 0, 6], [10, 17, 0, 0], [8, 10, 0, 3], [9, 9, 0, 0]], 'extra': 5}, '12': {'rune_id': 13304069072, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 9055514989, 'slot_no': 1, 'rank': 5, 'class': 6, 'set_id': 10, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 662530, 'sell_value': 33126, 'pri_eff': [3, 118], 'prefix_eff': [0, 0], 'sec_eff': [[8, 15, 0, 0], [4, 22, 0, 0], [2, 8, 0, 0], [12, 6, 0, 0]], 'extra': 5}, '13': {'rune_id': 32273161293, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 9055514989, 'slot_no': 2, 'rank': 5, 'class': 6, 'set_id': 10, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 760800, 'sell_value': 38040, 'pri_eff': [8, 42], 'prefix_eff': [9, 4], 'sec_eff': [[10, 6, 0, 0], [6, 20, 0, 5], [11, 15, 0, 0], [2, 7, 1, 7]], 'extra': 5}, '14': {'rune_id': 32338343027, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 9055514989, 'slot_no': 3, 'rank': 5, 'class': 6, 'set_id': 10, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 570600, 'sell_value': 28530, 'pri_eff': [5, 118], 'prefix_eff': [1, 206], 'sec_eff': [[8, 16, 0, 0], [12, 8, 0, 0], [10, 10, 0, 0], [11, 8, 0, 0]], 'extra': 4}, '15': {'rune_id': 25305468181, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 9055514989, 'slot_no': 5, 'rank': 5, 'class': 6, 'set_id': 10, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 608640, 'sell_value': 30432, 'pri_eff': [1, 1800], 'prefix_eff': [10, 6], 'sec_eff': [[12, 6, 0, 0], [5, 30, 0, 0], [9, 12, 0, 0], [8, 16, 0, 4]], 'extra': 5}}, 'costume_master_id': 23103, 'trans_items': [], 'attribute': 3, 'create_time': '2017-04-17 07:29:30', 'source': 5, 'homunculus': 0, 'homunculus_name': '', 'awakening_info': []}, {'unit_id': 14771742036, 'wizard_id': 15286762, 'island_id': 4, 'pos_x': 6, 'pos_y': 2, 'building_id': 177212429, 'unit_master_id': 22613, 'unit_level': 40, 'class': 6, 'con': 681, 'atk': 747, 'def': 714, 'spd': 102, 'resist': 40, 'accuracy': 0, 'critical_rate': 15, 'critical_damage': 50, 'experience': 1005420, 'exp_gained': 0, 'exp_gain_rate': 0, 'skills': [[13103, 9], [13108, 1], [13113, 4]], 'runes': [{'rune_id': 13287329658, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 14771742036, 'slot_no': 4, 'rank': 5, 'class': 6, 'set_id': 10, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 684720, 'sell_value': 34236, 'pri_eff': [10, 80], 'prefix_eff': [9, 6], 'sec_eff': [[6, 20, 0, 6], [2, 8, 0, 6], [4, 23, 0, 7], [8, 5, 1, 3]], 'extra': 5}, {'rune_id': 16461747952, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 14771742036, 'slot_no': 6, 'rank': 5, 'class': 6, 'set_id': 10, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 592790, 'sell_value': 29639, 'pri_eff': [4, 63], 'prefix_eff': [0, 0], 'sec_eff': [[8, 12, 0, 2], [2, 9, 1, 5], [10, 12, 0, 0], [9, 14, 0, 0]], 'extra': 5}, {'rune_id': 18102477721, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 14771742036, 'slot_no': 3, 'rank': 5, 'class': 6, 'set_id': 20, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 475500, 'sell_value': 25461, 'pri_eff': [5, 118], 'prefix_eff': [0, 0], 'sec_eff': [[2, 7, 1, 7], [9, 10, 0, 0], [10, 12, 0, 0], [8, 13, 0, 4]], 'extra': 5}, {'rune_id': 21353687263, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 14771742036, 'slot_no': 5, 'rank': 5, 'class': 6, 'set_id': 15, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 557920, 'sell_value': 29875, 'pri_eff': [1, 1800], 'prefix_eff': [8, 5], 'sec_eff': [[4, 28, 0, 6], [12, 8, 0, 0], [9, 6, 0, 0], [6, 8, 0, 6]], 'extra': 4}, {'rune_id': 24877666906, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 14771742036, 'slot_no': 1, 'rank': 5, 'class': 6, 'set_id': 15, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 602300, 'sell_value': 32251, 'pri_eff': [3, 160], 'prefix_eff': [0, 0], 'sec_eff': [[8, 5, 0, 2], [11, 14, 0, 0], [4, 20, 0, 6], [9, 10, 0, 0]], 'extra': 5}, {'rune_id': 27497149370, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 14771742036, 'slot_no': 2, 'rank': 5, 'class': 6, 'set_id': 3, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 443800, 'sell_value': 30190, 'pri_eff': [8, 42], 'prefix_eff': [0, 0], 'sec_eff': [[3, 19, 0, 0], [10, 7, 1, 0], [4, 14, 0, 5], [9, 20, 0, 0]], 'extra': 5}], 'costume_master_id': 0, 'trans_items': [], 'attribute': 3, 'create_time': '2019-12-26 04:46:43', 'source': 5, 'homunculus': 0, 'homunculus_name': '', 'awakening_info': []}, {'unit_id': 13599221684, 'wizard_id': 15286762, 'island_id': 4, 'pos_x': 20, 'pos_y': 18, 'building_id': 0, 'unit_master_id': 21813, 'unit_level': 40, 'class': 6, 'con': 780, 'atk': 593, 'def': 769, 'spd': 102, 'resist': 15, 'accuracy': 0, 'critical_rate': 15, 'critical_damage': 50, 'experience': 1005420, 'exp_gained': 0, 'exp_gain_rate': 0, 'skills': [[12518, 3], [12508, 3], [12513, 6]], 'runes': {'0': {'rune_id': 13827397622, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 13599221684, 'slot_no': 3, 'rank': 5, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 523050, 'sell_value': 26152, 'pri_eff': [5, 160], 'prefix_eff': [0, 0], 'sec_eff': [[10, 9, 0, 0], [8, 18, 0, 1], [11, 7, 0, 0], [1, 319, 0, 0]], 'extra': 5}, '6': {'rune_id': 22307579098, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 13599221684, 'slot_no': 1, 'rank': 5, 'class': 5, 'set_id': 16, 'upgrade_limit': 15, 'upgrade_curr': 12, 'base_value': 290700, 'sell_value': 17329, 'pri_eff': [3, 99], 'prefix_eff': [0, 0], 'sec_eff': [[1, 275, 0, 438], [12, 5, 0, 0], [8, 20, 0, 3], [11, 7, 0, 0]], 'extra': 5}, '7': {'rune_id': 29575863203, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 13599221684, 'slot_no': 2, 'rank': 5, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 697400, 'sell_value': 34870, 'pri_eff': [8, 42], 'prefix_eff': [0, 0], 'sec_eff': [[11, 23, 0, 0], [3, 13, 0, 0], [6, 7, 0, 0], [4, 8, 0, 0]], 'extra': 4}, '8': {'rune_id': 21896485238, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 13599221684, 'slot_no': 4, 'rank': 5, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 684720, 'sell_value': 34236, 'pri_eff': [2, 63], 'prefix_eff': [6, 7], 'sec_eff': [[8, 15, 0, 3], [5, 17, 0, 0], [4, 5, 0, 0], [10, 6, 0, 0]], 'extra': 3}, '9': {'rune_id': 7061616483, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 13599221684, 'slot_no': 5, 'rank': 5, 'class': 5, 'set_id': 16, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 244800, 'sell_value': 14593, 'pri_eff': [1, 2088], 'prefix_eff': [0, 0], 'sec_eff': [[9, 5, 0, 0], [8, 19, 0, 4], [4, 7, 0, 5], [12, 7, 0, 0]], 'extra': 5}, '10': {'rune_id': 14631503672, 'wizard_id': 15286762, 'occupied_type': 1, 'occupied_id': 13599221684, 'slot_no': 6, 'rank': 5, 'class': 6, 'set_id': 13, 'upgrade_limit': 15, 'upgrade_curr': 15, 'base_value': 646680, 'sell_value': 32334, 'pri_eff': [2, 63], 'prefix_eff': [12, 6], 'sec_eff': [[8, 17, 0, 4], [9, 4, 0, 0], [1, 148, 0, 0], [6, 7, 0, 6]], 'extra': 3}}, 'costume_master_id': 22803, 'trans_items': [], 'attribute': 3, 'create_time': '2019-06-08 06:16:17', 'source': 5, 'homunculus': 0, 'homunculus_name': '', 'awakening_info': []}], 'reward': {'mana': 5256, 'crystal': 0, 'crate': {'changestones': [{'craft_item_id': 106026505, 'wizard_id': 15286762, 'craft_type': 6, 'craft_type_id': 70114, 'sell_value': 19200, 'amount': 1}]}, 'event_crate': []}, 'clear_bonus': [], 'practice_mode': 0, 'item_list': [], 'ts_val': 1127669422, 'tvalue': 1595529254, 'tvaluelocal': 1595471654, 'tzone': 'America/Los_Angeles'}
art = {'rid': 21137277, 'wizard_id': 15286762, 'occupied_id': 0, 'slot': 0, 'type': 2, 'attribute': 0, 'unit_style': 2, 'natural_rank': 3, 'rank': 3, 'level': 0, 'pri_effect': [101, 10, 0, 0, 0], 'sec_effects': [[408, 3, 0, 0, 0], [202, 3, 0, 0, 0]], 'locked': 0, 'source': 50001, 'extra': [], 'date_add': '2020-08-21 01:25:24', 'date_mod': '2020-08-21 01:25:24'}


# print(test['reward']['crate']['changestones'])
# changestone = test['reward']['crate']['changestones']
# print(changestone[0]['craft_type_id'])
# s = str(changestone[0]['craft_type_id'])
# print(s)
# out = []
# while len(s):
#     out.insert(0, s[-2:])
#     s = s[:-2]
# print(out)
# print(out[0])
# print(out[1])
# print(out[2])
# if out[1] == '01':
#     print('yes')


print(art['unit_style'])
if art['rank'] == 3:
    print('Found blue arti')

print(art['sec_effects'][0])
print(len(art['sec_effects']))
for x in art['sec_effects']:
    print(x[0], x[1])